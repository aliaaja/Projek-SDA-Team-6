class Kendaraan:
    def __init__(self, id_kendaraan, jenis_kendaraan, nama_driver, kapasitas, ketersediaan):
        self.id_kendaraan = id_kendaraan
        self.jenis_kendaraan = jenis_kendaraan
        self.nama_driver = nama_driver
        self.kapasitas = kapasitas
        self.ketersediaan = ketersediaan

    def __str__(self):
        return f"ID: {self.id_kendaraan}, Jenis: {self.jenis_kendaraan}, Driver: {self.nama_driver}, Kapasitas: {self.kapasitas}, Tersedia: {self.ketersediaan}"

class PemesananKendaraan:
    def __init__(self, id_pemesanan, nama_pelanggan, id_kendaraan, lokasi_jemput, lokasi_tujuan):
        self.id_pemesanan = id_pemesanan
        self.nama_pelanggan = nama_pelanggan
        self.id_kendaraan = id_kendaraan
        self.lokasi_jemput = lokasi_jemput
        self.lokasi_tujuan = lokasi_tujuan

    def __str__(self):
        return f"ID Pemesanan: {self.id_pemesanan}, Pelanggan: {self.nama_pelanggan}, ID Kendaraan: {self.id_kendaraan}, Jemput: {self.lokasi_jemput}, Tujuan: {self.lokasi_tujuan}"

class ManajemenKendaraan:
    def __init__(self):
        self.list_kendaraan = []

    def daftar_kendaraan(self):
        if not self.list_kendaraan:
            return None
        return "\n".join(str(kendaraan) for kendaraan in self.list_kendaraan)

    def update_kendaraan(self, id_kendaraan, jenis_kendaraan=None, nama_driver=None, kapasitas=None, ketersediaan=None):
        for kendaraan in self.list_kendaraan:
            if kendaraan.id_kendaraan == id_kendaraan:
                if jenis_kendaraan:
                    kendaraan.jenis_kendaraan = jenis_kendaraan
                if nama_driver:
                    kendaraan.nama_driver = nama_driver
                if kapasitas is not None:
                    kendaraan.kapasitas = kapasitas
                if ketersediaan is not None:
                    kendaraan.ketersediaan = ketersediaan
                messagebox.showinfo("Berhasil", f"Kendaraan {id_kendaraan} berhasil diperbarui.")
                return
        messagebox.showwarning("Error", f"Tidak ada kendaraan dengan ID {id_kendaraan}")

    def hapus_kendaraan(self, id_kendaraan):
        for kendaraan in self.list_kendaraan:
            if kendaraan.id_kendaraan == id_kendaraan:
                self.list_kendaraan.remove(kendaraan)
                messagebox.showinfo("Berhasil", f"Kendaraan {id_kendaraan} berhasil dihapus.")
                return
        messagebox.showwarning("Error", f"Tidak ada kendaraan dengan ID {id_kendaraan}")

    def tambah_kendaraan(self, id_kendaraan, jenis_kendaraan, nama_driver, kapasitas, ketersediaan):
        for kendaraan in self.list_kendaraan:
            if kendaraan.id_kendaraan == id_kendaraan:
                messagebox.showwarning("Error", f"Kendaraan dengan ID {id_kendaraan} sudah ada.")
                return
        kendaraan_baru = Kendaraan(id_kendaraan, jenis_kendaraan, nama_driver, kapasitas, ketersediaan)
        self.list_kendaraan.append(kendaraan_baru)
        messagebox.showinfo("Berhasil", f"Kendaraan {id_kendaraan} berhasil ditambahkan.")

    def cari_kendaraan_tersedia(self, jenis_kendaraan):
        for kendaraan in self.list_kendaraan:
            if kendaraan.jenis_kendaraan == jenis_kendaraan and kendaraan.ketersediaan:
                return kendaraan
        return None

    def atur_ketersediaan_kendaraan(self, id_kendaraan, ketersediaan):
        for kendaraan in self.list_kendaraan:
            if kendaraan.id_kendaraan == id_kendaraan:
                kendaraan.ketersediaan = ketersediaan
                return
    def atur_ketersediaan_kendaraan(self, id_kendaraan, ketersediaan):
        for kendaraan in self.list_kendaraan:
            if kendaraan.id_kendaraan == id_kendaraan:
                kendaraan.ketersediaan = ketersediaan
                return

class Pemesanan:
    def __init__(self, manajemen_kendaraan):
        self.manajemen_kendaraan = manajemen_kendaraan
        self.list_pemesanan = []
        self.counter_id_pemesanan = 1

    def pesan_kendaraan(self, nama_pelanggan, jenis_kendaraan, lokasi_jemput, lokasi_tujuan):
        kendaraan = self.manajemen_kendaraan.cari_kendaraan_tersedia(jenis_kendaraan)
        if kendaraan:
            kendaraan.ketersediaan = False
            pemesanan = PemesananKendaraan(
                id_pemesanan=self.counter_id_pemesanan,
                nama_pelanggan=nama_pelanggan,
                id_kendaraan=kendaraan.id_kendaraan,
                lokasi_jemput=lokasi_jemput,
                lokasi_tujuan=lokasi_tujuan
            )
            self.list_pemesanan.append(pemesanan)
            self.counter_id_pemesanan += 1
            messagebox.showinfo("Berhasil", f"Pemesanan berhasil: {pemesanan}")
        else:
            messagebox.showwarning("Tidak Ada Kendaraan", "Tidak ada kendaraan tersedia untuk jenis yang dipilih.")

class AplikasiPemesanan:
    def __init__(self, root):
        self.manajemen_kendaraan = ManajemenKendaraan()
        self.sistem = Pemesanan(self.manajemen_kendaraan)
        self.root = root
        self.root.title("Sistem Pemesanan Kendaraan")

        # Membuat frame untuk antarmuka
        self.frame = tk.Frame(root)
        self.frame.pack(pady=10, padx=10)

        self.title_label = tk.Label(self.frame, text="Pesan Kendaraan Online", font=("Helvetica", 16, "bold"))
        self.title_label.grid(row=0, columnspan=2, pady=10)

        self.pesan_button = tk.Button(self.frame, text="Pesan Kendaraan", command=self.pesan_kendaraan)
        self.pesan_button.grid(row=1, columnspan=2, pady=5)

        self.title_label = tk.Label(self.frame, text="Manajemen Kendaraan", font=("Helvetica", 16, "bold"))
        self.title_label.grid(row=2, columnspan=2, pady=10)

        self.daftar_button = tk.Button(self.frame, text="Daftar Semua Kendaraan", command=self.daftar_kendaraan)
        self.daftar_button.grid(row=3, column=0, pady=5)

        self.tambah_kendaraan_button = tk.Button(self.frame, text="Tambah Kendaraan", command=self.tambah_kendaraan)
        self.tambah_kendaraan_button.grid(row=3, column=1, pady=5)

        self.update_kendaraan_button = tk.Button(self.frame, text="Perbarui Kendaraan", command=self.update_kendaraan)
        self.update_kendaraan_button.grid(row=4, column=0, pady=5)

        self.hapus_kendaraan_button = tk.Button(self.frame, text="Hapus Kendaraan", command=self.hapus_kendaraan)
        self.hapus_kendaraan_button.grid(row=4, column=1, pady=5)

        self.keluar_button = tk.Button(self.frame, text="Keluar", command=root.quit)
        self.keluar_button.grid(row=5, columnspan=2, pady=10)
